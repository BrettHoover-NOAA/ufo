window begin: 2017-12-31T21:00:00Z
window end: 2030-01-01T03:00:00Z

observations:
- obs space:
    name: Ocean density calculation
    obsdatain:
      engine:
        type: H5File
        obsfile: Data/ufo/testinput_tier_1/oceanprofile_theta_pressure_testdata.nc4
    simulated variables: [waterTemperature, salinity, waterDensity]
    observed variables: [waterTemperature, salinity]
    derived variables: [waterDensity]
  obs filters:
  - filter: Variable Transforms
    where:
    - variable:
        name: ObsValue/waterTemperature
      is_defined:
    - variable:
        name: TestReference/absoluteSalinity
      is_defined:
    Transform: OceanDensity
    ocean pressure group: TestReference
    ocean salinity group: TestReference
  compareVariables:
    - reference:
        name: TestReference/waterDensity
      test:
        name: DerivedObsValue/waterDensity
      relTol: 2.0e-4
    - reference:
        name: TestReference/int_zeros
      test:
        name: QCflagsData/waterDensity
    - reference:
        name: TestReference/float_ones
      test:
        name: DerivedObsError/waterDensity

